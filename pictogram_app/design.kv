<Ui>:
    MDScreen:
        name: 'screen_principal'
        md_bg_color: 1, 1, 0.996, 1  # blanco cálido

        MDBoxLayout:
            orientation: 'vertical'

            # Tercio superior: botón + bienvenida
            MDBoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.33
                padding: "10dp"
                spacing: "10dp"

                # Botón modo configuración
                MDBoxLayout:
                    size_hint_y: None
                    height: "48dp"
                    padding: "10dp"
                    MDRaisedButton:
                        text: "Sign in"
                        size_hint: None, None
                        size: "100dp", "28dp"
                        md_bg_color: 0.76, 0.94, 0.79, 1
                        text_color: 0.35, 0.29, 0.31, 1
                        pos_hint: {"center_y": 0.5}
                        on_release: app.change_user()
                        font_name: "fonts/ComicNeue-Bold.ttf"

                # Bienvenida
                MDBoxLayout:
                    size_hint_y: None
                    height: "120dp"
                    md_bg_color: 0.98, 0.8, 0.91, 1
                    orientation: "vertical"
                    padding: "12dp"
                    spacing: "6dp"

                    MDLabel:
                        text: "Bienvenida a SynapGIS"
                        halign: "center"
                        font_style: "H4"
                        theme_text_color: "Custom"
                        text_color: 0.35, 0.29, 0.31, 1
                        font_name: "fonts/BalooPaaji2-SemiBold.ttf"

                    MDLabel:
                        text: "Elige una categoría para comunicarte"
                        halign: "center"
                        font_style: "H6"
                        theme_text_color: "Secondary"
                        font_name: "fonts/ComicNeue-Regular.ttf"

            # 2/3 inferiores: pictogramas
            ScrollView:
                size_hint_y: 0.67

                MDGridLayout:
                    cols: 3
                    spacing: "12dp"
                    padding: "16dp"
                    adaptive_height: True
                    size_hint_y: None
                    height: self.minimum_height

                    # Cuadros con pictogramas
                    MDCard:
                        md_bg_color: 1, 1, 0.996, 1
                        size_hint_y: None
                        height: "160dp"
                        on_release: app.mostrar_categoria("acciones", "Acciones")
                        ripple_behavior: True
                        orientation: "vertical"
                        padding: "8dp"
                        spacing: "4dp"

                        Image:
                            source: "pics/acciones/bailar.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint_y: 0.75

                        MDCard:
                            size_hint_y: 0.25
                            md_bg_color: 0.76, 0.94, 0.79, 1
                            radius: [8]
                            elevation: 1
                            padding: 0
                            orientation: "vertical"

                            MDLabel:
                                text: "Acciones"
                                halign: "center"
                                font_name: "fonts/ComicNeue-Bold.ttf"

                    MDCard:
                        md_bg_color: 1, 1, 0.996, 1
                        size_hint_y: None
                        height: "160dp"
                        on_release: app.mostrar_categoria("emociones", "Emociones")
                        ripple_behavior: True
                        orientation: "vertical"
                        padding: "8dp"
                        spacing: "4dp"

                        Image:
                            source: "pics/emociones/contenta.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint_y: 0.75

                        MDCard:
                            size_hint_y: 0.25
                            md_bg_color: 0.76, 0.94, 0.79, 1
                            radius: [8]
                            elevation: 1
                            padding: 0
                            orientation: "vertical"

                            MDLabel:
                                text: "Emociones"
                                halign: "center"
                                font_name: "fonts/ComicNeue-Bold.ttf"

                    MDCard:
                        md_bg_color: 1, 1, 0.996, 1
                        size_hint_y: None
                        height: "160dp"
                        on_release: app.mostrar_categoria("cuerpo", "Cuerpo")
                        ripple_behavior: True
                        orientation: "vertical"
                        padding: "8dp"
                        spacing: "4dp"

                        Image:
                            source: "pics/acciones/banar.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint_y: 0.75

                        MDCard:
                            size_hint_y: 0.25
                            md_bg_color: 0.76, 0.94, 0.79, 1
                            radius: [8]
                            elevation: 1
                            padding: 0
                            orientation: "vertical"

                            MDLabel:
                                text: "Partes del cuerpo"
                                halign: "center"
                                font_name: "fonts/ComicNeue-Bold.ttf"

                    MDCard:
                        md_bg_color: 1, 1, 0.996, 1
                        size_hint_y: None
                        height: "160dp"
                        on_release: app.mostrar_categoria("personas", "Personas")
                        ripple_behavior: True
                        orientation: "vertical"
                        padding: "8dp"
                        spacing: "4dp"

                        Image:
                            source: "pics/personas.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint_y: 0.75

                        MDCard:
                            size_hint_y: 0.25
                            md_bg_color: 0.76, 0.94, 0.79, 1
                            radius: [8]
                            elevation: 1
                            padding: 0
                            orientation: "vertical"

                            MDLabel:
                                text: "Personas"
                                halign: "center"
                                font_name: "fonts/ComicNeue-Bold.ttf"

                    MDCard:
                        md_bg_color: 1, 1, 0.996, 1
                        size_hint_y: None
                        height: "160dp"
                        on_release: app.mostrar_categoria("Ropa", "Ropa")
                        ripple_behavior: True
                        orientation: "vertical"
                        padding: "8dp"
                        spacing: "4dp"

                        Image:
                            source: "pics/ropa.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint_y: 0.75

                        MDCard:
                            size_hint_y: 0.25
                            md_bg_color: 0.76, 0.94, 0.79, 1
                            radius: [8]
                            elevation: 1
                            padding: 0
                            orientation: "vertical"

                            MDLabel:
                                text: "Ropa"
                                halign: "center"
                                font_name: "fonts/ComicNeue-Bold.ttf"

                    MDCard:
                        md_bg_color: 1, 1, 0.996, 1
                        size_hint_y: None
                        height: "160dp"
                        on_release: app.mostrar_categoria("lugares", "Lugares")
                        ripple_behavior: True
                        orientation: "vertical"
                        padding: "8dp"
                        spacing: "4dp"

                        Image:
                            source: "pics/lugares.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint_y: 0.75

                        MDCard:
                            size_hint_y: 0.25
                            md_bg_color: 0.76, 0.94, 0.79, 1
                            radius: [8]
                            elevation: 1
                            padding: 0
                            orientation: "vertical"

                            MDLabel:
                                text: "Lugares"
                                halign: "center"
                                font_name: "fonts/ComicNeue-Bold.ttf"

            MDBoxLayout:
                size_hint_y: None
                height: "14dp"
                padding: "4dp", "4dp", "4dp", "4dp"
                MDLabel:
                    text: "Developed by GIS"
                    italic: True
                    halign: "center"
                    font_style: "Caption"  # más pequeño que Body1
                    theme_text_color: "Custom"
                    text_color: 0.35, 0.29, 0.31, 0.6  # marrón oscuro con transparencia            
    MDScreen:
        name: 'password_screen'
        md_bg_color: 1, 1, 0.996, 1  # blanco cálido

        MDBoxLayout:
            orientation: 'vertical'
            padding: '40dp'
            spacing: '30dp'
            pos_hint: {"center_y": 0.7}

            MDBoxLayout:
                size_hint_y: None
                height: "100dp"
                md_bg_color: 0.98, 0.8, 0.91, 1  # rosa pastel
                radius: [10]
                padding: "12dp"

                MDLabel:
                    text: "Introduce la contraseña"
                    halign: 'center'
                    font_style: "H5"
                    theme_text_color: "Custom"
                    text_color: 0.35, 0.29, 0.31, 1
                    font_name: "fonts/ComicNeue-Bold.ttf"

            MDTextField:
                id: password_field
                hint_text: "Contraseña"
                password: True
                mode: "rectangle"
                size_hint_x: None
                width: "250dp"
                pos_hint: {'center_x': 0.5}
                line_color_normal: 0.35, 0.29, 0.31, 1

            MDRaisedButton:
                text: "Entrar"
                pos_hint: {'center_x': 0.5}
                md_bg_color: 0.76, 0.94, 0.79, 1
                text_color: 0.35, 0.29, 0.31, 1
                on_release: app.verify_password(password_field.text)
                font_name: "fonts/ComicNeue-Bold.ttf"

            MDTextButton:
                text: "Volver"
                pos_hint: {'center_x': 0.5}
                theme_text_color: "Custom"
                text_color: 0.35, 0.29, 0.31, 1
                on_release: app.root.current = "screen_principal"
                font_name: "fonts/ComicNeue-Bold.ttf"

    MDScreen:
        name: "config_mode_screen"
        md_bg_color: 1, 1, 0.996, 1  # blanco cálido

        MDBoxLayout:
            orientation: "vertical"
            padding: "40dp"
            spacing: "20dp"
            pos_hint: {"center_y": 0.5}
            size_hint_y: None
            height: self.minimum_height

            Image:
                source: "pics/stock/Chubbs_DrawKit_Vector_Illustrations-07.png" 
                size_hint: None, None
                size: "240dp", "240dp"
                pos_hint: {"center_x": 0.5}
                allow_stretch: True
                keep_ratio: True

            MDBoxLayout:
                size_hint: None, None
                size: "500dp", "240dp"
                radius: [12]
                md_bg_color: 0.76, 0.94, 0.79, 1 # rosa pastel
                padding: "8dp"
                orientation: "vertical"
                pos_hint: {"center_x": 0.5}

                MDLabel:
                    text: "Página en desarrollo"
                    halign: "center"
                    font_style: "H4"
                    theme_text_color: "Custom"
                    text_color: 0.35, 0.29, 0.31, 1
                    bold: True
                    font_name: "fonts/ComicNeue-Bold.ttf"

                MDLabel:
                    text: "Por favor, contacta con el soporte técnico de Ingeniería de la Salud para más información."
                    halign: "center"
                    font_style: "Body1"
                    theme_text_color: "Secondary"
                    text_size: self.width, None
                    font_name: "fonts/ComicNeue-Regular.ttf"

            MDTextButton:
                text: "Volver"
                pos_hint: {"center_x": 0.5}
                theme_text_color: "Custom"
                text_color: 0.35, 0.29, 0.31, 1
                on_release: app.root.current = "screen_principal"
                font_name: "fonts/ComicNeue-Bold.ttf"
    MDScreen:
        name: "categoria_screen"
        md_bg_color: 1, 1, 0.996, 1

        MDBoxLayout:
            orientation: "vertical"

            MDBoxLayout:
                size_hint_y: 0.2
                md_bg_color: 0.98, 0.8, 0.91, 1
                padding: "12dp"

                MDLabel:
                    id: categoria_titulo
                    text: "Categoría"
                    halign: "center"
                    font_style: "H4"
                    theme_text_color: "Custom"
                    text_color: 0.35, 0.29, 0.31, 1
                    font_name: "fonts/BalooPaaji2-SemiBold.ttf"

            ScrollView:
                size_hint_y: 0.8

                MDGridLayout:
                    id: grid_pictos
                    cols: 3
                    spacing: "12dp"
                    padding: "16dp"
                    adaptive_height: True
                    size_hint_y: None
                    height: self.minimum_height
            MDTextButton:
                text: "Volver"
                pos_hint: {"center_x": 0.5}
                theme_text_color: "Custom"
                text_color: 0.35, 0.29, 0.31, 1
                on_release: app.root.current = "screen_principal"
                font_name: "fonts/ComicNeue-Bold.ttf"
                padding: "10dp", "10dp", "10dp", "10dp"
